---
import AboutSection from "../components/sections/AboutSection.astro";
import HeroSection from "../components/sections/HeroSection.astro";
import Layout from "../layouts/Layout.astro";

import "normalize.css/normalize.css";
import ContactSection from "../components/sections/ContactSection.astro";
import ExpHSection from "../components/sections/ExpHSection.astro";
import ExpSSection from "../components/sections/ExpSSection.astro";
import ProjectSection from "../components/sections/ProjectSection.astro";
import WorkSection from "../components/sections/WorkSection.astro";
import "../sass/main.scss";
import { getPreferredLanguage } from "../i18n/languageManager";
import { getTranslations } from "../i18n/utils";

// Detect language
const acceptLanguage = Astro.request.headers.get("accept-language");
const lang = getPreferredLanguage(Astro.cookies, acceptLanguage);

// Load translations
const translations = await getTranslations(lang);
---

<Layout>
  <HeroSection lang={lang} translations={translations} />
  <AboutSection lang={lang} translations={translations} />
  <WorkSection lang={lang} translations={translations} />
  <ExpHSection lang={lang} translations={translations} />
  <ExpSSection lang={lang} translations={translations} />
  <ProjectSection lang={lang} translations={translations} />
  <ContactSection lang={lang} translations={translations} />
</Layout>
