---

---

<section id="contact">
  <div class="contact__wrapper">
    <h2 class="contact__title"><span>Contact</span></h2>
    <div class="contact__success"></div>
    <form
      class="contact__form"
      id="contact-form"
      action="https://formsubmit.co/ajax/clement.maillet56@gmail.com"
      method="POST"
    >
      <input type="hidden" name="_captcha" value="false" />
      <div class="contact__form-group">
        <label for="contact-nom" class="contact__form-label">Nom</label>
        <input
          type="text"
          id="contact-nom"
          name="nom"
          class="contact__form-input"
          required
        />
      </div>
      <div class="contact__form-group">
        <label for="contact-prenom" class="contact__form-label">Prénom</label>
        <input
          type="text"
          id="contact-prenom"
          name="prenom"
          class="contact__form-input"
          required
        />
      </div>
      <div class="contact__form-group">
        <label for="contact-email" class="contact__form-label">Email</label>
        <input
          type="email"
          id="contact-email"
          name="email"
          class="contact__form-input"
          required
        />
      </div>
      <div class="contact__form-group">
        <label for="contact-message" class="contact__form-label">Message</label>
        <textarea
          id="contact-message"
          name="message"
          class="contact__form-textarea"
          rows="5"
          required></textarea>
      </div>
      <div class="contact__form-group contact__form-group--recaptcha">
        <div
          class="g-recaptcha"
          data-sitekey="6LeW4HgrAAAAAHcfyOZzQvIyeJRJRll-NI6grXIv"
        >
        </div>
      </div>
      <button type="submit" class="contact__form-submit">Envoyer</button>
    </form>
    <script type="module" is:inline>
      const form = document.getElementById("contact-form");
      const successDiv = document.querySelector(".contact__success");
      function showSuccess(msg, isError = false) {
        successDiv.textContent = msg;
        successDiv.classList.add("contact__success--visible");
        if (isError) {
          successDiv.classList.add("contact__success--error");
        } else {
          successDiv.classList.remove("contact__success--error");
        }
      }
      function hideSuccess() {
        successDiv.textContent = "";
        successDiv.classList.remove(
          "contact__success--visible",
          "contact__success--error"
        );
      }
      if (form) {
        form.addEventListener("submit", async (e) => {
          e.preventDefault();
          hideSuccess();
          const recaptchaResponse =
            window.grecaptcha && window.grecaptcha.getResponse
              ? window.grecaptcha.getResponse()
              : "";
          if (!recaptchaResponse) {
            showSuccess(
              "Veuillez valider le reCAPTCHA pour envoyer le formulaire.",
              true
            );
            return;
          }
          const data = new FormData(form);
          const res = await fetch(form.action, {
            method: "POST",
            body: data,
            headers: { Accept: "application/json" },
          });
          if (res.ok) {
            form.reset();
            if (window.grecaptcha) window.grecaptcha.reset();
            showSuccess("Votre message a bien été envoyé, merci !");
          } else {
            showSuccess("Une erreur est survenue, veuillez réessayer.", true);
            if (window.grecaptcha) window.grecaptcha.reset();
          }
        });
      }
    </script>
  </div>
</section>
